<div class="w-full h-[38.5rem] p-1 flex gap-1 relative">

  <div class="flex flex-col gap-2 w-[55%] h-[100%]">

    <div class="flex justify-between p-3 w-full h-[12%]">

      <h1 class="text-[2rem] ml-3 text-[#FF7900] font-bold">Entités</h1>

      <div *ngIf="display==true" class="flex justify-center items-center mt-4">
        <button (click)="modalEntity()"
          class="bg-[#FF7900] cursor-pointer text-lg text-center shadow-md shadow-[#242a30] text-white rounded-lg p-1 font-bold w-28 h-8">
            + Entité
        </button>
      </div>

    </div>

    <div class="shadow-md shadow-[#242a30] rounded-sm w-full h-[90%] flex flex-col gap-8">

      <div class="w-[99%] flex flex-1 flex-wrap overflow-y-auto p-6 gap-6">

        <ng-container *ngIf="datas.length > 0">
            <div *ngFor="let item of datas.reverse()" [class.selected]="item.id == selectedItem"
              class="flex flex-col gap-4 justify-center items-center ring-1 ring-[#242a30] ml-4 shadow-md shadow-[#242a30] rounded-md w-[26%] h-[27%]">

              <div (click)="displayIndic(item)" class="cursor-pointer text-lg text-[#009081] font-bold"
                [class.selecteda]="item.id == selectedItem">
                {{item.sigle}}
              </div>

              <div *ngIf="display==true" class="w-28 h-7 flex gap-2 justify-center items-center">
                <i (click)="editEntity(item)" [class.selectedb]="item.id === selectedItem"
                  class="cursor-pointer material-icons text-green-600">edit</i>
                <i (click)="deleteEntity(item.id)" data-nom="nomEntite"
                  class="cursor-pointer material-icons text-red-600">delete</i>
              </div>
            </div>
        </ng-container>

        <ng-container *ngIf="datas.length == 0">
          <div class="ml-32 flex justify-center items-center">
            <h1 class="text-[2rem] text-[#FF663E]">Aucune entité n'a été ajoutée</h1>
          </div>
        </ng-container>

      </div>

    </div>

  </div>

  <div class="flex flex-col w-[55%] h-[100%] gap-2">

    <div class="w-full mt-3 h-[3%]">
    </div>

    <div class="shadow-md shadow-[#242a30] rounded-sm w-full flex flex-col p-3 gap-6 h-[95%]">

      <ng-container *ngIf="indic.indicateurs.length > 0 || newIndic == 'new'">
        <h1 class="text-2xl font-bold underline text-[#FF7900] text-center">
          {{indic.sigle}} | {{indic.indicateurs.length}} Indicateurs
        </h1>

        <div class="w-[100%] rounded-sm h-[90%] flex flex-col gap-5">

          <div class="flex flex-col h-[98%] w-full overflow-y-auto gap-5 p-1">
            <div *ngFor="let item of indic.indicateurs"
              class="shadow-md ring-1 ring-[#FF7900] p-2 shadow-[#242a30] flex gap-2 bg-white w-[100%] h-[18%] rounded-xl">
              <h1 class="text-xl w-[90%] font-semibold">{{item.indicateur.libelle}}</h1>
              <div class="w-[10%] h-7 flex mt-1 justify-center items-center">
                <i (click)="openIndicModal(item.indicateur)" class="material-icons cursor-pointer text-yellow-400">info</i>
                <i *ngIf="display==true" (click)="editIndic(item.indicateur)" class="material-icons cursor-pointer text-green-400">edit</i>
                <i *ngIf="display==true" (click)="deleteIndic(item.indicateur)" class="material-icons cursor-pointer text-red-600">delete</i>
              </div>
            </div>
          </div>

          <div *ngIf="display==true" class="flex justify-end p-2">
            <span (click)="addIndic()"
              class="ring-2 cursor-pointer ring-[#FF7900] w-6 h-8 rounded-full flex justify-center items-center">
              <span class="flex justify-center items-center text-[#FF7900] text-[2.5rem] mt-[-0.6rem]">+</span>
            </span>
          </div>

        </div>
      </ng-container>

      <ng-container *ngIf="indic.indicateurs.length == 0 && newIndic != 'new'">
        <h1 class="text-2xl font-bold underline text-[#FF7900] text-center">
          Entité | Indicateurs
        </h1>

        <div class="w-full rounded-sm h-[90%] flex justify-center items-center p-2">

          <h1 class="text-[2rem] text-[#FF7900]">Veuillez choisir une entité</h1>

        </div>
      </ng-container>

    </div>

  </div>

  <!--------------------------------------Modal---------------------------------------->


  <div class="absolute inset-0 z-50 w-[99.8%] h-[99.5%] bg-black bg-opacity-25"
      style="display: none;" id="entite">

    <form [formGroup]="modal" class="bg-white mt-10 ml-80 w-[50%] h-[72%] flex flex-col gap-4 rounded-[6px] ring-1 ring-[#242a30]">

      <div class="flex h-[20%] gap-44 bg-[#FF7900]">
        <h1
          class="w-[40%] flex justify-center items-center underline ml-44 h-12 font-semibold text-white text-2xl font-['Inter'] whitespace-nowrap">
          {{title}}
        </h1>
        <div (click)="closeMod()"
          class="cursor-pointer w-[10px] h-[10px] text-white text-[22px] font-normal font-['Inter']">
          X
        </div>
      </div>

      <div class="flex flex-col gap-12 m-2 h-[85%]">

        <div class="flex flex-col gap-8 p-4">

          <div class="flex flex-col gap-2">
            <label class=" font-normal text-xl font-['Inter']">Libellé Entité</label>
            <input formControlName="libelle"
              class="focus:border-[#009081] outline-none w-[100%] p-2 focus:ring-1 focus:ring-[#242a30] bg-white rounded-[10px] border-2 border-[#FF7900]"
              placeholder="saisir le nom de le libellé" type="text" id="input1" name="input1">
          </div>

          <div class="flex flex-col gap-2">
            <label class=" font-normal text-xl font-['Inter']">SIGLE</label>
            <input formControlName="sigle"
              class="focus:border-[#009081] outline-none w-[100%] p-2 focus:ring-1 focus:ring-[#242a30] bg-white rounded-[10px] border-2 border-[#FF7900]"
              placeholder="saisir le sigle" type="text" id="input1" name="input1">
          </div>

        </div>

        <div class="flex justify-center items-center">
          <div (click)="addorUpEntity()" class="cursor-pointer w-[124px] h-[40px] bg-[#FF7900] rounded-lg flex justify-center items-center text-white text-xl font-semibold">
            <ng-container *ngIf="op=='add'">Ajouter</ng-container>
            <ng-container *ngIf="op=='update'">Modifier</ng-container>
          </div>
        </div>

      </div>

    </form>

  </div>

  <div class="absolute inset-0 z-50 w-[99.5%] h-[99%] bg-black bg-opacity-25"
    style="display: none;" id="indic">

    <form [formGroup]="modalIndic" class="bg-white mt-10 ml-80 w-[50%] h-[90%] flex flex-col gap-2 rounded-[6px] ring-1 ring-[#242a30]">

      <div class="flex gap-36 w-full h-[20%] bg-[#FF7900]">
        <h1
          class="w-[40%] flex justify-center items-center underline ml-52 h-12 font-semibold text-white text-[1.8rem] whitespace-nowrap">
          {{titre}}
        </h1>
        <div (click)="close()" class="cursor-pointer w-[10px] h-[10px] text-white text-[22px] font-normal font-['Inter']">
          X
        </div>
      </div>

      <div class="flex flex-col gap-6 m-2 h-[85%]">

        <div class="flex flex-col gap-6 p-3">
          <div class="flex flex-col gap-2">
            <label class=" font-normal text-xl font-['Inter']">Libellé</label>
            <input formControlName="libelle"
              class="focus:border-[#009081] outline-none w-[100%] p-2 focus:ring-1 focus:ring-[#242a30] bg-white rounded-[10px] border-2 border-[#FF7900]"
              placeholder="saisir le nom de l'indicateur" type="text" id="input1" name="input1">
          </div>
          <div class="flex flex-col gap-2">
            <label class=" text-xl font-normal font-['Inter']">Formule</label>
            <textarea formControlName="formule"
              class="focus:border-[#009081] outline-none w-[100%] h-48 p-2 focus:ring-1 focus:ring-[#242a30] bg-white rounded-[10px] border-2 border-[#FF7900]"
              placeholder="Veuillez renseignez la formule de calcul de l'indiacteur..." id="comment-input"
              name="comment-input" rows="4" cols="50"></textarea>
          </div>
        </div>

        <div class="w-full flex justify-center items-center h-[40px] ">
          <div (click)="addOrUpIndic()" class="cursor-pointer w-[22%] text-center bg-[#FF7900] rounded-[10px] h-[100%] text-white text-[25px] font-normal font-['Inter']">
            <ng-container *ngIf="stat=='mod'">
              Modifier
            </ng-container>
            <ng-container *ngIf="stat=='add'">
              Ajouter
            </ng-container>
          </div>
        </div>
      </div>

    </form>

  </div>

  <div class="absolute inset-0 z-50 w-[99.5%] h-[99%] bg-black bg-opacity-25"
    style="display: none;" id="ind">

    <form [formGroup]="modalIndic2"
      class="bg-white mt-10 ml-80 w-[50%] h-[90%] flex flex-col gap-2 rounded-[6px] ring-1 ring-[#242a30]">

      <div class="flex gap-36 w-full h-[20%] bg-[#009081]">
        <h1
          class="w-[40%] flex justify-center items-center underline ml-52 h-12 font-semibold text-white text-[1.8rem] whitespace-nowrap">
          Informations Indicateur
        </h1>
        <div (click)="closeInd()"
          class="cursor-pointer w-[10px] h-[10px] text-red-600 text-[22px] font-normal font-['Inter']">
          X
        </div>
      </div>

      <div class="flex flex-col gap-6 m-2 h-[85%]">

        <div class="flex flex-col gap-6 p-3">
          <div class="flex flex-col gap-2">
            <label class="text-[#009081] font-normal text-xl font-['Inter']">Libellé</label>
            <input formControlName="libelle"
              class="focus:border-[#009081] outline-none w-[100%] p-2 focus:ring-1 focus:ring-[#242a30] bg-white rounded-[10px] border-2 border-[#009081]"
              placeholder="saisir le nom de l'indicateur" type="text" id="input1" name="input1">
          </div>
          <div class="flex flex-col gap-2">
            <label class="text-[#009081] text-xl font-normal font-['Inter']">Formule</label>
            <textarea formControlName="formule"
              class="focus:border-[#009081] outline-none w-[100%] h-48 p-2 focus:ring-1 focus:ring-[#242a30] bg-white rounded-[10px] border-2 border-[#009081]"
              placeholder="Veuillez renseignez la formule de calcul de l'indiacteur..." id="comment-input"
              name="comment-input" rows="4" cols="50"></textarea>
          </div>
        </div>

        <div class="w-full flex justify-center items-center h-[40px] ">
          <div (click)="closeInd()"
            class="cursor-pointer w-[22%] text-center bg-[#FF7900] rounded-[10px] h-[100%] text-white text-[25px] font-normal font-['Inter']">
              Fermer
          </div>
        </div>
      </div>

    </form>

  </div>


</div>
