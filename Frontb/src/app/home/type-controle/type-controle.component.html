<div class="flex flex-col gap-6 w-full h-[100%]">

  <div class="flex justify-between p-2 w-full">
    <div class="flex gap-8 w-[40%]">
      <h1 (click)="selectType()" class="cursor-pointer text-[2rem] ml-4 font-bold" [ngClass]="{'one':typ}">
        Types de controles</h1>
      <h1 (click)="selectArchive()" class="cursor-pointer text-[2rem] ml-4 font-bold" [ngClass]="{'one':archive}">
        Archives</h1>
    </div>

    <form class="w-[9%] p-1">
      @if (typ) {
        @if (display) {
      <span (click)="openModal()"
        class="p-2 h-9 bg-[#FF663E] cursor-pointer shadow-md shadow-[#242a30] text-[white] text-xl rounded-lg flex justify-center items-center font-semibold">
        <span class="text-2xl mb-1">+</span>Type
      </span>
    }
      }
    </form>
  </div>

  <div class="w-[99%] h-[90%] overflow-y-auto m-1">

    <div class="flex flex-col gap-5 p-1">
      @if (typ) {
      @for (type of types(); track type.id) {
      <div
        class="shadow-md ring-1 ring-[#FF663E] p-2 shadow-[#242a30] flex justify-between items-center bg-white w-full rounded-xl">
        <h1 class="text-xl font-semibold">{{type.libelle}}</h1>
        @if (display) {
        <div class="w-28 h-3 flex gap-3 justify-center items-center">
          <i (click)="editModal(type)" class="material-icons cursor-pointer text-yellow-400">edit</i>
          <i (click)="deleteRisk(type.id)" class="material-icons cursor-pointer text-green-600">archive</i>
        </div>
      }
      </div>
      }
      @empty {
      <h1 class="text-2xl">Aucun risque trouvé</h1>
      }
      }
      @if (archive) {
      @for (type of archives(); track type.id) {
      <div
        class="shadow-md ring-1 ring-[#FF663E] p-2 shadow-[#242a30] flex justify-between items-center bg-white w-full rounded-xl">
        <h1 class="text-xl font-semibold">{{type.libelle}}</h1>
        @if (display) {
        <div class="w-28 h-3 flex gap-3 justify-center items-center">
          <i (click)="unarchive(type.id)" class="material-icons cursor-pointer text-green-600">unarchive</i>
        </div>
      }
      </div>
      }
      @empty {
      <h1 class="text-2xl">Aucune archive trouvée</h1>
      }
      }
    </div>

  </div>


  <!-------------------------------MODAL-------------------------------------->


  <div class="z-50 fixed inset-0 bg-gray-900 bg-opacity-75 flex justify-center items-center" style="display: none;"
    id="type">

    <form [formGroup]="typeform"
      class="bg-white mt-36 ml-[30rem] w-[50%] h-[45%] flex flex-col gap-4 rounded-[6px] ring-2 ring-[#242a30]">

      <div class="flex justify-between w-full rounded-[6px] h-[15%] bg-[#FF7900]">
        <h1 class="w-[35%] flex justify-center items-center h-12 text-2xl font-semibold text-white">
          {{titre}}
        </h1>
        <span (click)="closeModal()"
          class="cursor-pointer w-[5%] h-[10px] text-white text-[22px] font-normal font-['Inter']">
          <i class="fas fa-times"></i>
        </span>

      </div>

      <div class="flex flex-col gap-14 h-[80%]">

        <div class="flex flex-col gap-6 p-3">
          <div class="flex flex-col gap-2">
            <label class="font-normal text-xl font-['Inter']">Libellé</label>
            <input formControlName="libelle"
              class="focus:border-[#FF7900] outline-none w-[100%] p-2 bg-white rounded-[10px] border-2 border-[#FF7900]"
              placeholder="saisir le nom du type de controle" type="text">
          </div>
        </div>

        <div (click)="addOrUpTyp()"
          class="cursor-pointer w-[15%] text-center bg-[#FF7900] rounded-[5px] ml-6 h-[13%] text-white text-[25px] font-normal">
          {{btn}}
        </div>
      </div>

    </form>

  </div>

</div>
